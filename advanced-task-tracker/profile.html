<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Advanced Task Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8F9FA; }
        .profile-banner {
            background-color: #2C4465; /* Default color */
            transition: background-color 0.3s ease-in-out;
        }
        .avatar-upload-wrapper {
            position: relative;
            width: 128px;
            height: 128px;
            margin-top: -64px;
            border: 4px solid white;
            border-radius: 9999px;
            background-color: #E2E8F0;
        }
        .avatar-upload-wrapper:hover .overlay {
            opacity: 1;
        }
        .overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0,0,0,0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            cursor: pointer;
        }
        .color-swatch {
            width: 32px;
            height: 32px;
            border-radius: 9999px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }
        .color-swatch.selected {
            border-color: #FFC828;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="w-full max-w-4xl mx-auto p-4 md:p-8">
        <header class="mb-8 text-center">
            <a href="./app.html" class="text-sm text-blue-600 hover:underline mb-4 inline-block">&larr; Back to Dashboard</a>
            <h1 class="text-4xl font-bold text-gray-900">Customize Your Profile</h1>
            <p class="text-gray-500 mt-2">Make it fun, make it yours!</p>
        </header>

        <main class="bg-white rounded-2xl shadow-xl">
            <!-- Profile Banner -->
            <div id="profile-banner" class="profile-banner h-48 rounded-t-2xl"></div>

            <!-- Profile Content -->
            <div class="p-8">
                <div class="flex items-center">
                    <!-- Avatar -->
                    <div class="avatar-upload-wrapper">
                        <img id="avatar-preview" src="https://via.placeholder.com/128" alt="User Avatar" class="w-full h-full rounded-full object-cover">
                        <label for="avatar-input" class="overlay">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                        </label>
                        <input type="file" id="avatar-input" class="hidden" accept="image/png, image/jpeg">
                    </div>

                    <!-- User Info -->
                    <div class="ml-6">
                        <h2 id="display-name-header" class="text-3xl font-bold text-gray-800">Loading...</h2>
                        <p id="user-role" class="text-gray-500">User Role</p>
                    </div>
                </div>

                <!-- Form Fields -->
                <form id="profile-form" class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                        <input type="text" id="firstName" name="firstName" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400">
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                        <input type="text" id="lastName" name="lastName" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400">
                    </div>
                    <div class="md:col-span-2">
                        <label for="bio" class="block text-sm font-medium text-gray-700">Personal Bio</label>
                        <textarea id="bio" name="bio" rows="3" class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400" placeholder="Tell us something fun about yourself..."></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700">Banner Color</label>
                        <div id="color-swatches" class="mt-2 flex gap-3">
                            <div class="color-swatch selected" style="background-color: #2C4465;" data-color="#2C4465"></div>
                            <div class="color-swatch" style="background-color: #EF4444;" data-color="#EF4444"></div>
                            <div class="color-swatch" style="background-color: #22C55E;" data-color="#22C55E"></div>
                            <div class="color-swatch" style="background-color: #8B5CF6;" data-color="#8B5CF6"></div>
                            <div class="color-swatch" style="background-color: #EC4899;" data-color="#EC4899"></div>
                        </div>
                    </div>
                </form>

                <div class="mt-8">
                    <button type="submit" form="profile-form" id="save-profile-btn" class="w-full bg-yellow-400 text-gray-800 font-semibold p-3 rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition duration-200 shadow-sm">
                        Save Changes
                    </button>
                </div>
                <p id="save-status" class="text-center mt-4 text-green-600 opacity-0 transition-opacity">Profile saved successfully!</p>
            </div>
        </main>
    </div>

    <script type="module" src="./js/profile.js"></script>
</body>
</html>
